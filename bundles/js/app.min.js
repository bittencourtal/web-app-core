!function(){angular.module("mdThemeColorsDSS",[]).factory("mdThemeColorsDSS",["mdThemeColors",function(e){return{init:function(){var i=[],t=Object.getOwnPropertyNames(e);dss.values=dss.values||[],dss.getKeys=function(){return dss.values.select(function(e){return e.key})},t.forEach(function(t,n){var o=Object.getOwnPropertyNames(e[t]);o.forEach(function(n){i.push({key:t+"."+n,value:e[t][n]})})}),i.forEach(function(e){dss.setProperty(e.key,e.value),dss.values.push(e)})}}}])}(),String.prototype.contains=function(e){return this.indexOf(e)>-1},String.prototype.replaceAll=function(e,i){if("."==e)return this.replace(/\./g,i);var t=new RegExp(e,"g");return this.replace(t,i)},function(e){e.isAndroid=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("android")>-1},e.isIOS=function(){return/iPad|iPhone|iPod/.test(e.navigator.userAgent)&&!e.MSStream}}(window),function(e){var i=["squid-login","squid-feed","squid-mission","squid-checkout","squid-user"];e.squid.app=angular.module("squid-app",e.squid.defaultDependencies.concat(i)),e.squid.app.run(["$rootScope","auth","store","jwtHelper","$location",function(i,t,n,o,a){function r(){a.path(e.APP_CONFIG.LOGIN_ROUTE)}function s(){a.path(e.APP_CONFIG.START_VIEW)}function c(e){return e&&e.$$route&&e.$$route.requireLogin}function u(){return!(!t.profile||!t.profile.app_metadata)&&t.profile.app_metadata.acceptedTerms}function d(){t.signout(),n.remove("profile"),n.remove("token"),$.jStorage.flush(),e.APP_CONFIG.REQUIRE_AUTHENTICATION?r():s()}i=i||{},i.pageTitle="",i.setPageTitle=function(e){i.pageTitle=e},i.$on("$locationChangeStart",function(){var i=n.get("token");if(i&&(o.isTokenExpired(i)?$.jStorage.flush():t.authenticate(n.get("profile"),i)),!t.isAuthenticated)return $.jStorage.flush(),void(e.APP_CONFIG.REQUIRE_AUTHENTICATION&&r())}),i.$on("$routeChangeSuccess",function(e,i){u()||d(),c(i)&&!t.isAuthenticated&&r()}),t.hookEvents()}])}(window),function(e){function i(e,i){function t(){Object.keys(e._PALETTES).forEach(function(i){var t=e._PALETTES[i],n=[];o[i]=n,Object.keys(t).forEach(function(e){/#[0-9A-Fa-f]{6}|0-9A-Fa-f]{8}\b/.exec(t[e])&&(n[e]=t[e])})})}function n(){i.factory("mdThemeColors",[function(){var i={},n=function(i){return function(){var n=e._THEMES["default"].colors[i],a=n.name;return o[a]||t(),o[a]["default"]=o[a][n.hues["default"]],o[a].hue1=o[a][n.hues["hue-1"]],o[a].hue2=o[a][n.hues["hue-2"]],o[a].hue3=o[a][n.hues["hue-3"]],o[a]}};return Object.defineProperty(i,"primary",{get:n("primary")}),Object.defineProperty(i,"accent",{get:n("accent")}),Object.defineProperty(i,"warn",{get:n("warn")}),Object.defineProperty(i,"background",{get:n("background")}),i}])}var o={};t(),n()}function t(i){e.APP_CONFIG.THEME.CUSTOM&&(i.definePalette(e.APP_CONFIG.THEME.PRIMARY_COLOR.name,e.APP_CONFIG.THEME.PRIMARY_COLOR.value),i._PALETTES[e.APP_CONFIG.THEME.PRIMARY_COLOR.name]=e.APP_CONFIG.THEME.PRIMARY_COLOR.value,i.definePalette(e.APP_CONFIG.THEME.SECONDARY_COLOR.name,e.APP_CONFIG.THEME.SECONDARY_COLOR.value),i._PALETTES[e.APP_CONFIG.THEME.SECONDARY_COLOR.name]=e.APP_CONFIG.THEME.SECONDARY_COLOR.value,i.definePalette(e.APP_CONFIG.THEME.WARN_COLOR.name,e.APP_CONFIG.THEME.WARN_COLOR.value),i._PALETTES[e.APP_CONFIG.THEME.WARN_COLOR.name]=e.APP_CONFIG.THEME.WARN_COLOR.value),i.theme("default").primaryPalette(e.APP_CONFIG.THEME.PRIMARY_COLOR.name).accentPalette(e.APP_CONFIG.THEME.SECONDARY_COLOR.name).warnPalette(e.APP_CONFIG.THEME.WARN_COLOR.name)}e.squid.app.config(["$httpProvider","authProvider","jwtInterceptorProvider","$mdThemingProvider","$mdIconProvider","$provide","$compileProvider","$sceProvider",function(n,o,a,r,s,c,u,d){n.defaults.useXDomain=!0,delete n.defaults.headers.common["X-Requested-With"],o.init({domain:e.APP_CONFIG.AUTH0.DOMAIN,clientID:e.APP_CONFIG.AUTH0.CLIENT_ID,loginUrl:e.APP_CONFIG.LOGIN_ROUTE}),a.tokenGetter=function(e){return e.get("token")},n.interceptors.push("jwtInterceptor"),n.interceptors.push("appIdInjector"),u.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|chrome-extension|whatsapp):/),d.enabled(!1),t(r),i(r,c)}])}(window),function(e){"use strict";e.squid.app.controller("TemplateController",["$scope","$rootScope","auth","$location","$mdMedia","mdThemeColorsDSS",function(i,t,n,o,a,r){i=i||{},t.pageTitle="",t.secondaryNav=!1,t.isSmallDevice=a("sm"),i.isLoading=!1,i.viewUrl="",i.auth=n,i.$location=o,i.path=o.$$path.split("/")[1],i.toggleObject={item:-1},i.APP_DIR=e.APP_CONFIG.APP_DIR,i.scrollToUp=function(){$("html, body").animate({scrollTop:0},1500)},i.$on("$routeChangeStart",function(){i.isLoading=!0}),i.$on("$routeChangeError",function(){i.isLoading=!1}),i.$on("$routeChangeSuccess",function(e,n){t.pageTitle=n&&n.$$route?n.$$route.pageTitle:"",i.viewUrl=n&&n.$$route?n.$$route.viewUrl:"",t.secondaryNav=!(!n||!n.$$route)&&n.$$route.secondaryNav,i.path=o.$$path.split("/")[1],i.isLoading=!1}),r.init()}])}(window),function(e){"use strict";var i={delay:1e4,close:"OK"};e.squid.app.directive("toolbar",["$rootScope","$mdSidenav","$location","auth","store","$mdMedia","AboutCampaignModalService","feedService","$mdToast",function(t,n,o,a,r,s,c,u,d){return{templateUrl:e.APP_CONFIG.APP_DIR+"/directives/toolbar/toolbar.html",restrict:"EA",replace:!0,scope:{},link:function(l,p,f,m){function h(){a.signout(),r.remove("profile"),r.remove("token"),$.jStorage.flush(),g()}function g(){o.path(e.LOGIN_ROUTE)}function P(){o.path(e.START_VIEW)}function v(){return t.isSmallDevice?"bottom left":"top right"}function I(){var e=d.simple().content("Não há campanha cadastrada no momento.").action(i.close).parent($("main").get(0)).hideDelay(i.delay).highlightAction(!1).position(v());d.show(e).then(function(e){})}function A(){APP_CONFIG.CAMPAIGNS.UNIQUE_CAMPAIGN.IS_UNIQUE&&u.getMissionsActive(function(e){if(e){var i=e.data.first();l.uniqueCampaign=i?i:null}})}l.APP_CONFIG=e.APP_CONFIG,l.$mdSidenav=n,l.path=o.$$path.split("/")[1],l.auth=a,l.$location=o,l.uniqueCampaign=null,l.isSmallDevice=s("sm"),l.mobileSideMenuUrl=e.APP_CONFIG.APP_DIR+"/directives/toolbar/mobile-side-menu.html",l.getButtonClass=function(e){return{active:l.path==e}},l.goBack=function(){window.history.go(-1)},l.vincularConta=function(){try{var e={userId:a.profile.user_id,redirectUrl:window.location.href,email:a.profile.email},i=JSON.stringify(e),t=btoa(i);window.open("https://campanhas.squidit.com.br/v1/vincular-instagram?data="+t,"_blank")}catch(n){console.log(n)}},l.goToUniqueCampaign=function(){return l.uniqueCampaign?void o.path("mission/mission-details/"+l.uniqueCampaign._id):I()},l.openAboutCampaign=function(){c.openDialog(a.profile).then(function(){},h)},l.logout=function(){a.signout(),r.remove("profile"),r.remove("token"),$.jStorage.flush(),e.APP_CONFIG.REQUIRE_AUTHENTICATION?g():P()},A()}}}])}(window),function(e){e.squid.app.factory("appIdInjector",[function(){var i={request:function(i){return i.headers.app_id=e.APP_CONFIG.APP_ID(),i}};return i}])}(window),function(e){e.squid.app.config(["$routeProvider",function(e){e.otherwise({redirectTo:"/mission/actives"})}])}(window),function(e){e.squid.checkout=angular.module("squid-checkout",[])}(window),function(e){e.squid.feed=angular.module("squid-feed",[])}(window),function(e){e.squid.login=angular.module("squid-login",[])}(window),function(e){e.squid.mission=angular.module("squid-mission",[])}(window),function(e){e.squid.user=angular.module("squid-user",[])}(window),function(e){function i(e,i,t){e.currentStep="step-1",e.TEXTS={STEP1:APP_CONFIG.CAMPAIGNS.UNIQUE_CAMPAIGN.ABOUT.TEXTS.STEP_1,STEP2:APP_CONFIG.CAMPAIGNS.UNIQUE_CAMPAIGN.ABOUT.TEXTS.STEP_2},e.next=function(){e.currentStep="step-2"},e.back=function(){e.currentStep="step-1"},e.cancel=function(){i.cancel()},e.ok=function(){i.hide(!0)}}var t={delay:1e4,close:"OK"};e.squid.login.controller("AboutCampaignController",["$scope","$mdDialog",i]),e.squid.login.factory("AboutCampaignModalService",["$rootScope","$q","$mdDialog","$mdToast","userService","store",function(n,o,a,r,s,c){function u(){return n.isSmallDevice?"bottom left":"top right"}function d(e){var i=o.defer();return s.update(e.app_metadata,function(t){i.resolve(e)},function(t){i.reject(e)}),i.promise}function l(e){var i=o.defer();e.app_metadata=e.app_metadata?e.app_metadata:{},e.app_metadata.acceptedTerms=!1,c.set("profile",e);var n=r.simple().content("Confirme a leitura sobre a campanha para poder navegar e participar.").action(t.close).parent($("main").get(0)).hideDelay(t.delay).highlightAction(!1).position(u());return r.show(n).then(function(e){}),d(e).then(i.resolve,i.reject),i.promise}function p(e,i){var t=o.defer();return i.app_metadata=i.app_metadata?i.app_metadata:{},i.app_metadata.acceptedTerms=e,c.set("profile",i),d(i).then(t.resolve,t.reject),t.promise}function f(t){var n=o.defer();return a.show({controller:i,templateUrl:e.APP_CONFIG.APP_DIR+"/modules/campaign/views/about-campaign-dialog.html",parent:angular.element(document.body),clickOutsideToClose:!0}).then(function(e){p(e,t).then(n.resolve,n.reject)},function(){l(t).then(n.reject,n.reject)}),n.promise}return{openDialog:f}}])}(window),function(e){"use strict";e.squid.checkout.controller("CheckoutController",["$scope","checkoutService",function(e,i){function t(t){var n={};t&&(n.minId=t),e.isLoading=!0,i.getCheckouts(n,function(i){e.checkoutList=e.checkoutList.concat(i.data),e.paginationMetadata=i.paginationMetadata,e.isLoading=!1},function(i){e.isLoading=!1})}e.checkoutList=[],e.paginationMetadata={},e.isLoading=!1,e.loadMore=function(){!e.isLoading&&e.paginationMetadata.next&&t(e.paginationMetadata.next.minId)},e.hasPointsAvailable=function(e,i){return e.pointsAvailable>=i.points},t()}])}(window),function(e){"use strict";var i={delay:3e4,close:"OK"};e.squid.checkout.controller("CheckoutPrizeController",["$scope","$rootScope","checkoutService","userService","prizeService","$mdToast","$mdDialog","$routeParams","auth","$location",function(e,t,n,o,a,r,s,c,u,d){function l(){var i=moment(u.profile.birthDate);e.birthDate={day:u.profile.birthDate?i.date():"",month:u.profile.birthDate?i.month()+1:"",year:u.profile.birthDate?i.year():""},e.userMetadata.emailContact=u.profile.emailContact,e.userMetadata.phone=u.profile.phone,e.userMetadata.address=u.profile.address,e.userMetadata.birthDate=u.profile.birthDate,e.userMetadata.gender=u.profile.gender}function p(){var i=new $.Deferred;return a.get({id:c.prizeId},function(t){e.prize=t,i.resolve(t)},function(e){i.reject(e)}),i.promise()}function f(){e.userMetadata.birthDate=moment({day:e.birthDate.day,month:e.birthDate.month-1,year:e.birthDate.year})}function m(){var i=new $.Deferred;return f(),o.update(e.userMetadata,function(e){i.resolve(e)},function(e){i.reject(e)}),i.promise()}function h(){var e=new $.Deferred;return n.checkoutPrize({id:c.prizeId},function(i){e.resolve(i)},function(i){e.reject(i)}),e.promise()}function g(){return t.isSmallDevice?"bottom left":"top right"}function P(t){var n=r.simple().content(t.message).action(i.close).parent($("main").get(0)).hideDelay(i.delay).highlightAction(!1).position(g());r.show(n).then(function(e){}),e.isLoading=!1,d.path("checkout")}function v(t){var n=t.data,o=r.simple().content(n.message).action(i.close).parent($("main").get(0)).hideDelay(i.delay).highlightAction(!1).position(g());r.show(o).then(function(e){}),e.isLoading=!1}function I(){var t=r.simple().content("Não foi possível atualizar as informações de perfil.").action(i.close).parent($("main").get(0)).hideDelay(i.delay).highlightAction(!1).position(g());r.show(t).then(function(e){}),e.isLoading=!1}function A(){e.isLoading=!0,p().then(function(){e.isLoading=!1})}e.auth=u,e.userMetadata={},e.isLoading=!1,e.currentTabIndex=0,e.maxYear=moment().subtract(5,"year").year(),e.prize={},e.onTabSelected=function(i){e.currentTabIndex=i},e.currentStepIsValid=function(){if(!e.userProfile||!e.userProfile.emailContact)return!1;switch(e.currentTabIndex){case 0:return e.userProfile.emailContact.$valid&&e.userProfile.phone.$valid;case 1:return e.userProfile.address.$valid;case 2:return e.userProfile.birthDateDay.$valid&&e.userProfile.birthDateMonth.$valid&&e.userProfile.birthDateYear.$valid;case 3:return e.userProfile.gender.$valid}},e.nextStep=function(){e.currentTabIndex++},e.rescue=function(){e.isLoading=!0,m().then(function(e){h().then(P,v)},I)},A(),e.$watch("auth.profile",function(){l()})}])}(window),function(e){e.squid.checkout.config(["$routeProvider",function(i){i.when("/checkout",{viewUrl:e.APP_CONFIG.APP_DIR+"/modules/checkout/views/checkout.html",templateUrl:e.APP_CONFIG.VIEWS.TEMPLATES.DEFAULT(),pageTitle:"Meus Pontos",requireLogin:!0}).when("/checkout/:prizeId",{viewUrl:e.APP_CONFIG.APP_DIR+"/modules/checkout/views/checkout-prize.html",templateUrl:e.APP_CONFIG.VIEWS.TEMPLATES.DEFAULT(),pageTitle:"Resgatar prêmio",secondaryNav:!0,requireLogin:!0})}])}(window),function(e){"use strict";e.squid.checkout.factory("checkoutService",["$resource",function(i){return i(e.APP_CONFIG.END_POINT_URL()+"/api/checkout/:action/:id",{action:"@action",id:"@id"},{getCheckouts:{method:"GET",params:{action:"missions"}},getVouchersByUser:{method:"GET",params:{action:"vouchers"},isArray:!0},validate:{method:"GET",params:{action:"validate"}},checkoutPrize:{method:"POST",params:{action:"prize"}}})}])}(window),function(e){"use strict";e.squid.checkout.factory("prizeService",["$resource",function(i){return i(e.APP_CONFIG.END_POINT_URL()+"/api/prize/:action/:id",{action:"@action",id:"@id"},{get:{method:"GET"}})}])}(window),function(e){"use strict";var i=[];e.squid.feed.controller("FeedController",["$scope","feedService","$element","$timeout","$q",function(e,t,n,o,a){function r(){function e(e){return i.any(function(i){return i.currentSrc==e.currentSrc})}function t(i){e(i)||i.play()}function o(e,i,t,n){return e<i&&t>n}function a(){var e=$(window).scrollTop()+s,i=$(window).scrollTop()+$(window).height()-s;r.each(function(n,a){var r=$(this).offset().top,s=$(this).height()+r,c=$(this).get(0);o(e,s,i,r)?t(c):c.pause()})}var r=$(n).find("video").not("[autoplay='autoplay']"),s=80;$(document).unbind("scroll"),$(document).on("scroll",a)}function s(){function e(e,i){var t=$(i).closest(".card");i.onplay=function(){t.addClass("video-playing")},i.onpause=function(){t.removeClass("video-playing")}}var i=$(n).find("video");$.each(i,e)}function c(){var e=a.defer();return o(function(){s(),r(),e.resolve()},100),e.promise}function u(i){var t=a.defer();return e.feedList=e.feedList.concat(i.data),e.paginationMetadata=i.paginationMetadata,t.resolve(),t.promise}function d(){e.isLoading=!1}function l(i){e.isLoading=!0,p(i).then(u).then(c).then(d)}function p(e){var i=a.defer(),n={status:"approved"};return e&&(n.minId=e),t.getFeedParticipation(n,i.resolve,i.reject),i.promise}e.feedList=[],e.paginationMetadata={},e.isLoading=!1,e.getCardClass=function(e){var i={};return i["card-feed-"+e.mediaType]=!0,i},e.playVideo=function(e,t){var n=$(e.currentTarget).get(0);if(n)return n.paused?n.play():(i.push(n),i=i.distinct(function(e,i){return e.currentSrc==i.currentSrc}),n.pause())},e.loadMore=function(){!e.isLoading&&e.paginationMetadata.next&&l(e.paginationMetadata.next.minId)},l()}])}(window),function(e){e.squid.feed.config(["$routeProvider",function(i){i.when("/feed",{viewUrl:e.APP_CONFIG.APP_DIR+"/modules/feed/views/feed.html",templateUrl:e.APP_CONFIG.VIEWS.TEMPLATES.DEFAULT(),pageTitle:"Feed"})}])}(window),function(e){"use strict";e.squid.feed.factory("feedService",["$resource",function(i){return i(e.APP_CONFIG.END_POINT_URL()+"/api/feed/:action/:id",{action:"@action",id:"@id"},{getFeedParticipation:{method:"GET",params:{action:"participation"}},getMissionsActive:{method:"GET",params:{action:"mission"}}})}])}(window),function(e){e.squid.login.controller("LoginController",["$scope","$rootScope","auth","$location","store","$mdDialog","$mdToast","$q","userService","AboutCampaignModalService",function(i,t,n,o,a,r,s,c,u,d){function l(e){return!(!e||!e.app_metadata)&&e.app_metadata.acceptedTerms}function p(){n.signout(),a.remove("profile"),a.remove("token"),$.jStorage.flush(),v(),f()}function f(){o.path(e.APP_CONFIG.LOGIN_ROUTE)}function m(){o.path(e.APP_CONFIG.START_VIEW)}function h(e){P(e)?m():o.path("/register")}function g(){n.isAuthenticated&&o.path(e.APP_CONFIG.START_VIEW)}function P(e){if(e)return e.birthDate&&e.gender}function v(){var e=c.defer();return i.isLoading=!1,e.resolve(),e.promise}function I(){var e=c.defer();return i.isLoading=!0,e.resolve(),e.promise}function A(){n.config.auth0lib.$container=null,n.signin({connections:["instagram"],container:"login-box",icon:"../images/logo.png",dict:T},function(e,i){return a.set("profile",e),a.set("token",i),l(e)?h(e):(I(),void d.openDialog(e).then(h,p))},function(e){})}i.isLoading=!1;var T={loadingTitle:"carregando...",close:"fechar",signin:{title:"Faça seu login ;)",signinText:"Entrar",signupText:"Cadastrar-se",usernamePlaceholder:"e-mail",emailPlaceholder:"e-mail",passwordPlaceholder:"Senha",separatorText:"ou",wrongEmailPasswordErrorText:"E-mail ou senha inválidos.",serverErrorText:"Você não está autorizado.",strategyEmailInvalid:"O e-mail é invalido.",strategyDomainInvalid:"O domínio {domain} não foi configurado.",returnUserLabel:"Da última vez você acessou como...",all:"Não é sua conta?",forgotText:"Esqueceu sua senha? Clique aqui."},signup:{serverErrorText:"Não foi possível se cadastrar."},reset:{serverErrorText:"Não foi possível resetar a senha."}};g(),A()}])}(window),function(e){e.squid.login.config(["$routeProvider",function(i){i.when("/login",{viewUrl:e.APP_CONFIG.APP_DIR+"/modules/login/views/index.html",templateUrl:e.APP_CONFIG.VIEWS.TEMPLATES.LOGIN,pageTitle:"Login",secondaryNav:!0})}])}(window),function(e){"use strict";e.squid.mission.controller("ActiveMissionController",["$scope","feedService",function(e,i){function t(t){var n={};t&&(n.minId=t),e.isLoading=!0,i.getMissionsActive(n,function(i){e.feedList=e.feedList.concat(i.data),e.paginationMetadata=i.paginationMetadata,e.isLoading=!1},function(i){e.isLoading=!1})}e.feedList=[],e.paginationMetadata={},e.isLoading=!1,e.loadMore=function(){!e.isLoading&&e.paginationMetadata.next&&t(e.paginationMetadata.next.minId)},t()}])}(window),function(e){e.squid.mission.controller("ChallengeController",["$scope","mission","$mdDialog","shareService",function(i,t,n,o){function a(){i.mission.shareText=i.mission.shareText.replaceAll("#","%23")}function r(){o.shareMission({id:i.mission._id})}function s(){n.hide()}i.mission=t,i.isMobile=e.isIOS()||e.isAndroid(),i.urlToShare=window.location.href.replaceAll("/#",""),i.textToShare="",i.descriptionToShare="",i.share=function(){r(),s()},i.closeModal=function(){s()},a()}])}(window),function(e){"use strict";e.squid.mission.controller("MissionDetailsController",["$scope","$rootScope","$routeParams","missionService","participationService","$mdDialog","$timeout",function(i,t,n,o,a,r,s){function c(){var e=new $.Deferred;return i.isLoading=!0,o.getMissionById({id:n.missionId},function(t){i.mission=t,i.isLoading=!1,e.resolve()},function(t){i.isLoading=!1,e.reject()}),e.promise()}function u(e){var i=moment(),t=moment(e),n=moment(t,"DD/MM/YYYY HH:mm:ss").diff(moment(i,"DD/MM/YYYY HH:mm:ss")),o=moment.duration(n),a=Math.floor(o.asDays()),r=moment.utc(n).format("HH"),s=moment.utc(n).format("mm"),c=moment.utc(n).format("ss");return a<=0?"Encerrada":a+" dias "+r+" horas "+s+" minutos e "+c+" segundos."}function d(){i.isLoadingParticipations||i.participations.data.length>0&&!i.participations.minId||0==i.participations.data.length&&!f||(f=!1,i.isLoadingParticipations=!0,a.getMissionParticipations({id:i.mission._id,minId:i.participations.minId,take:12},function(e){i.participations.data=i.participations.data.concat(e.data).distinct(function(e,i){return e._id==i._id}),i.participations.minId=e.paginationMetadata.next?e.paginationMetadata.next.minId:null,i.isLoadingParticipations=!1},function(){i.isLoadingParticipations=!1}))}function l(){setInterval(function(){i.mission&&i.mission.time&&(i.timeLeft=u(i.mission.time.fixedEndDate),i.$apply())},1e3)}function p(){c().then(function(){d(),t.pageTitle="#"+i.mission.hashtag}),l()}var f=!0;i.mission={},i.participations={data:[],minId:""},i.isLoading=!1,i.isLoadingParticipations=!1,i.menuIsOpen=!1,i.timeLeft="--",i.tooltipIsOpen=!1,i.loadMoreParticipations=function(){d()},i.participate=function(t){i.menuIsOpen=!1,r.show({controller:"ParticipateController",templateUrl:e.APP_CONFIG.APP_DIR+"/modules/mission/templates/participate.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0,locals:{mission:i.mission}}).then(function(){},function(){})},i.challenge=function(t){i.menuIsOpen=!1,r.show({controller:"ChallengeController",templateUrl:e.APP_CONFIG.APP_DIR+"/modules/mission/templates/challenge.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!0,locals:{mission:i.mission}}).then(function(){},function(){})},i.toggleMenu=function(){e.isAndroid()&&(i.menuIsOpen=!i.menuIsOpen)},i.$watch("menuIsOpen",function(e){e?s(function(){i.tooltipIsOpen=!0},250):i.tooltipIsOpen=!1}),p()}])}(window),function(e){e.squid.mission.controller("ParticipateController",["$scope","mission","$mdDialog",function(i,t,n){i.mission=t,i.isMobile=e.isIOS()||e.isAndroid(),i.openInstagram=function(){e.isIOS()?window.location="instagram://camera":window.location="intent://instagram.com/_n/mainfeed/#Intent;package=com.instagram.android;scheme=https;end",n.hide()},i.closeModal=function(){n.hide()}}])}(window),function(e){e.squid.mission.config(["$routeProvider",function(i){i.when("/mission/actives",{viewUrl:e.APP_CONFIG.APP_DIR+"/modules/mission/views/actives.html",templateUrl:e.APP_CONFIG.VIEWS.TEMPLATES.DEFAULT(),pageTitle:"Missões"}).when("/mission/mission-details/:missionId",{viewUrl:e.APP_CONFIG.APP_DIR+"/modules/mission/views/mission-details.html",templateUrl:e.APP_CONFIG.VIEWS.TEMPLATES.DEFAULT(),pageTitle:"",secondaryNav:!0})}])}(window),function(e){"use strict";e.squid.mission.factory("missionService",["$resource",function(i){return i(e.APP_CONFIG.END_POINT_URL()+"/api/mission/:action/:id",{action:"@action",id:"@id"},{getMissionById:{method:"GET"}})}])}(window),function(e){"use strict";e.squid.mission.factory("participationService",["$resource",function(i){return i(e.APP_CONFIG.END_POINT_URL()+"/api/participation/:action/:id",{action:"@action",id:"@id"},{getMissionParticipations:{method:"GET",params:{action:"mission"}},getUserParticipations:{method:"GET",params:{action:"user"}}})}])}(window),function(e){"use strict";e.squid.mission.factory("shareService",["$resource",function(i){return i(e.APP_CONFIG.END_POINT_URL()+"/api/share/:action/:id",{action:"@action",id:"@id"},{shareMission:{method:"POST",params:{action:"mission"}}})}])}(window),function(e){"use strict";e.squid.user.controller("MyProfileController",["$scope","auth","userService","$location","participationService","checkoutService","userStatisticsService",function(e,i,t,n,o,a,r){function s(){r.getUserProfileStatistics(function(i){e.userStatistics=i})}function c(){a.getVouchersByUser(function(i){e.vouchers=i})}function u(){e.isLoadingParticipations||e.participations.data.length>0&&!e.participations.minId||0==e.participations.data.length&&!l||(l=!1,e.isLoadingParticipations=!0,o.getUserParticipations({id:i.profile.user_id,minId:e.participations.minId,take:12},function(i){e.participations.data=e.participations.data.concat(i.data).distinct(function(e,i){return e._id==i._id}),e.participations.minId=i.paginationMetadata.next?i.paginationMetadata.next.minId:null,e.isLoadingParticipations=!1},function(){e.isLoadingParticipations=!1}))}function d(){i.isAuthenticated&&(u(),c(),s())}var l=!0;e.isLoadingParticipations=!1,e.auth=i,e.selectedTabIndex=0,e.isLoading=!1,e.userStatistics={},e.maxYear=moment().subtract(14,"years").year(),e.vouchers=[],e.participations={data:[],minId:""},e.getVoucherUsedLabel=function(e){return e?"Usado":"Não usado"},e.loadMoreParticipations=function(){i.isAuthenticated&&u()},d()}])}(window),function(e){e.squid.user.config(["$routeProvider",function(i){i.when("/my-profile",{viewUrl:e.APP_CONFIG.APP_DIR+"/modules/user/views/my-profile.html",templateUrl:e.APP_CONFIG.VIEWS.TEMPLATES.DEFAULT(),pageTitle:"Meu Perfil"})}])}(window),function(e){"use strict";e.squid.user.factory("userService",["$resource",function(i){return i(e.APP_CONFIG.END_POINT_URL()+"/api/user/:action/:id",{action:"@action",id:"@id"},{email:{method:"PUT",params:{action:"email"}},update:{method:"PUT"}})}])}(window),function(e){"use strict";e.squid.user.factory("userStatisticsService",["$resource",function(i){return i(e.APP_CONFIG.END_POINT_URL()+"/api/statistics/user/:action/:id",{action:"@action",id:"@id"},{getUserProfileStatistics:{method:"GET",params:{action:"me"}}})}])}(window),function(e){"use strict";e.squid.checkout.controller("CheckoutRescueModalController",["$scope","$modalInstance","prize","auth","checkoutService","userService",function(e,i,t,n,o,a){function r(){e.email!=n.profile.email?a.email({email:e.email},function(e){s()},function(i){e.validateStatus=i.data.message}):s()}function s(){o.getPrize({id:t.id},function(i){e.validateStatus=i.message},function(i){e.validateStatus=i.data.message,i.data.message.contains("e-mail")&&(l=!0)})}function c(){o.validate({id:t.id},function(i){e.validateStatus=i.status,i.status.contains("ok")&&(d=!0)},function(i){e.validateStatus=i.data.message})}function u(){c()}e.prize=t,e.email=n.profile.email,e.validateStatus="carregando...";var d=!1,l=!1;e.rescue=function(){r()},e.cancel=function(){i.dismiss("cancel")},u()}])}(window);